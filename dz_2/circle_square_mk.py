import random
import math


def circle_square_mk(r, n):
    # Площадь квадрата, в который вписана окружность
    square_area = (2 * r) ** 2

    # Счетчик точек внутри окружности
    inside_circle = 0

    for _ in range(n):
        # Генерация случайной точки в квадрате
        x = random.uniform(-r, r)
        y = random.uniform(-r, r)

        # Проверка, попадает ли точка внутрь окружности
        if x**2 + y**2 <= r**2:
            inside_circle += 1

    # Оценка площади окружности
    estimated_area = (inside_circle / n) * square_area
    return estimated_area


if __name__ == "__main__":
    r = 5  # Радиус окружности
    n = 1000000  # Количество экспериментов

    # Вычисление площади методом Монте-Карло
    mk_area = circle_square_mk(r, n)

    # Вычисление площади по формуле
    exact_area = math.pi * r**2

    # Вывод результатов
    print(f"Оценка площади методом Монте-Карло: {mk_area}")  # 78.5056
    print(f"Точная площадь по формуле: {exact_area}")  # 78.53981633974483
    print(f"Погрешность: {abs(mk_area - exact_area)}")  # 0.03421633974483029

    # Оценка погрешности в зависимости от n
    for n in [100, 1000, 10000, 100000, 1000000]:
        mk_area = circle_square_mk(r, n)
        error = abs(mk_area - exact_area)
        print(f"n = {n}, Погрешность = {error}")
        """ n = 100, Погрешность = 4.4601836602551685
            n = 1000, Погрешность = 0.9398163397448229
            n = 10000, Погрешность = 0.4401836602551583
            n = 100000, Погрешность = 0.03718366025516673
            n = 1000000, Погрешность = 0.07098366025516611"""
